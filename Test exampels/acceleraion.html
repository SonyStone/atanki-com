<!doctype html>
<html>
	<head>
	<meta charset="utf-8">
	<title></title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<canvas id="canvas" width= "400" height= "400">
	<p>This browser  does not support the <code>canvas</code> element.</p>
	</canvas>
	<textarea id="log"></textarea>
	<script src="utils.js"></script>
	<script src="arrow.js"></script>
	<script src="ball.js"></script>
	<script>
	window.onload = function() {
// our code starts here...
var   canvas  = document.getElementById('canvas')
	, context = canvas.getContext('2d')
	, log     = document.getElementById('log')
	, mouse   = utils.captureMouse(canvas)
	, ball    = new Ball()
	, ball2   = new Ball()
	, keys    = []
	, vx      = 0
	, vy      = 0
	, ax      = 0
	, ay      = 0;

ball.x = canvas.width / 2;
ball.y = canvas.height / 2;

ball2.x = canvas.width / 2;
ball2.y = canvas.height / 2;


window.addEventListener('keydown', function (event) {
	keys[event.keyCode] = event.type == 'keydown';
	log.value = "event.keyCode = " + event.keyCode;
}, false);


window.addEventListener('keyup', function () {
	keys[event.keyCode] = event.type == 'keydown';
	ax = 0;
	ay = 0;


}, false);
	

(function drawFrame() {
	window.requestAnimationFrame(drawFrame, canvas);
	context.clearRect(0, 0, canvas.width, canvas.height);

	if (keys[37] == true) {			// left
		ax = -0.1;
	}
	if (keys[39] == true) {			// right
		ax = 0.1;
	}
	if (keys[38] == true) {			// up
		ay = -0.1;
	}
	if (keys[40] == true) {			// down
		ay = 0.1;
	}
	if (keys[13] == true) {			// enter
		ball.x = canvas.width / 2;
		ball.y = canvas.height / 2;
	}
	if (keys[32] == true) {			// space
		vx = 0;
		vy = 0;
	}
	if (keys[87] == true) {			// W
		ball2.y += -3;
	}
	if (keys[83] == true) {			// S
		ball2.y += 3;
	}
	if (keys[65] == true) {			// A
		ball2.x += -3;
	}
	if (keys[68] == true) {			// D
		ball2.x += 3;
	}

	if ( ball.x < 0 || ball.x > canvas.width) {
		vx = -vx;
	}
	if ( ball.y < 0 || ball.y > canvas.height) {
		vy = -vy;
	}

	vx += ax;
	vy += ay;
	ball.x += vx;
	ball.y += vy;
	ball.draw(context);
	ball2.draw(context);
	//log.value = keys;
	log.value = ball.x
}());

// our code ends here...
	};
	</script>

</body>
</html>
